<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>子役カウンター</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <h1>子役カウンター（iPhone向け）</h1>

  <div class="card">
    <div class="label">ゲーム数（差分）</div>

    <div class="row">
      <div>
        <div class="small">スタートG（startGames = 開始ゲーム数）</div>
        <input id="startGamesInput" type="number" inputmode="numeric" min="0" value="0" />
      </div>

      <div>
        <div class="small">現在G（nowGames = 現在のゲーム数）</div>
        <input id="nowGamesInput" type="number" inputmode="numeric" min="0" value="0" />
      </div>
    </div>

    <div class="row">
      <button data-now-delta="-10">現在G -10</button>
      <button data-now-delta="-1">現在G -1</button>
      <button data-now-delta="1">現在G +1</button>
      <button data-now-delta="10">現在G +10</button>
      <button id="resetCurrentBtn">カウントだけリセット</button>
    </div>

    <div class="row">
      <div class="pill">差分G: <span id="diffGames">0</span></div>
    </div>

    <div class="small">
      差分G = 現在G - スタートG（0未満は0扱い）<br/>
      ※途中から打つときは、スタートGと現在Gをその時点の表示に合わせればOK
    </div>
  </div>

  <div class="card">
    <div class="label">ボーナス（bonus = ボーナス）</div>
    <div id="bonusCounters"></div>
    <div class="small">※-1は0で止まります</div>
  </div>

  <div class="card">
    <div class="label">子役名（6種類すべて変更可能）</div>
    <div class="row">
      <div><div class="small">役1</div><input id="koyakuName0" type="text" value="ベル" /></div>
      <div><div class="small">役2</div><input id="koyakuName1" type="text" value="チェリー" /></div>
      <div><div class="small">役3</div><input id="koyakuName2" type="text" value="スイカ" /></div>
      <div><div class="small">役4</div><input id="koyakuName3" type="text" value="弱チェ" /></div>
      <div><div class="small">役5</div><input id="koyakuName4" type="text" value="強チェ" /></div>
      <div><div class="small">役6</div><input id="koyakuName5" type="text" value="チャンス目" /></div>
    </div>
    <div class="small">※名前を変えると下の子役カウンター表示も即時で変わります</div>
  </div>

  <div class="card">
    <div class="label">子役カウント（koyaku counts = 子役回数）</div>
    <div id="koyakuCounters"></div>
    <div class="small">※-1は0で止まります</div>
  </div>

  <div class="card">
    <div class="label">自動計算</div>

    <div class="row">
      <div class="pill">BB: <span id="bbCount">0</span></div>
      <div class="pill">RB: <span id="rbCount">0</span></div>
      <div class="pill">BB+RB: <span id="bonusTotal">0</span></div>
    </div>

    <div class="rates-grid">
      <div class="pill">合算(BB+RB): <span id="bonusGassan">-</span></div>
      <div class="pill">BB: <span id="bbRate">-</span></div>
      <div class="pill">RB: <span id="rbRate">-</span></div>
      <div class="pill">子役合計: <span id="totalKoyaku">0</span></div>
    </div>

    <div class="small" id="koyakuRatesLine" style="margin-top:8px;"></div>
  </div>

  <div class="card">
    <div class="label">保存 / 履歴</div>
    <div class="row">
      <button id="saveBtn">保存</button>
      <button id="clearHistoryBtn">履歴を全削除</button>
    </div>
    <div class="small">保存先：localStorage（ブラウザ内）。ネット不要。</div>
    <div id="history"></div>
  </div>

  <!-- defer = HTML読み込み後にJS実行（DOMが取れる） -->
  <script src="./app.js" defer></script>
</body>
</html>